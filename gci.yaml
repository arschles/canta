version: 0.0.1
build:
  output-binary: gci
  env:
    - GOOS=linux
    - GOARCH=amd64
test:
  paths:
    - ./actions/...
    - ./config/...
    - ./util/...
    - ./log/...
    - ./tpl/...
    - .
docker:
  image-name: quay.io/arschles/gci
  tag: 0.0.1
  build:
    context:
      dir: .
      skip:
        - vendor
  push:
    auth-file-location: ~/.docker/config.json
custom:
  - name: hello-world
    description: print "hello world" in an ubuntu container
    image-name: ubuntu
    image-tag: "14.04"
    command: "echo 'hello world'"
    mount-target: /pwd
    env: []
  - name: bootstrap
    description: bootstrap all dependencies for this project
    image-name: quay.io/deis/go-dev
    image-tag: "0.13.0"
    command: "glide install"
    mount-target: /go/src/github.com/arschles/gci
    env: ["GOPATH=/go"]
  - name: cross-compile
    description: cross compile GCI using gox
    image-name: quay.io/deis/go-dev
    image-tag: "0.13.0"
    command: gox -verbose -os="linux darwin" -arch="amd64 386" -output="_dist/gci-{{.OS}}-{{.Arch}}" .
    mount-target: /go/src/github.com/arschles/gci
    env: ["GOPATH=/go"]
