version: 1
targets:
  - name: bootstrap
    description: "bootstrap the project. you'll usually only need to run this once for a checkout"
    commands:
      - glide install
  - name: build
    description: "build using 'go build'"
    depends: bootstrap
    commands:
      - go build -o gocons
  - name: install
    description: "install using 'go install'"
    depends: bootstrap
    commands:
      - go install
  - name: docker-build
    description: "build a completely static binary (CGO_ENABLED=0) suitable for use in linux systems, including alpine"
    depends: bootstrap
    commands:
      - docker run --rm e GOPATH=/gopath -e GO15VENDOREXPERIMENT=1 -e CGO_ENABLED=0 -v $GOPATH:/gopath -w /gopath/src/github.com/arschles/gocons golang:1.5.1 go build
